<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titanic Survival Prediction</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap">
    <style>
        /* General Reset */
        body,
        html {
            margin: 0;
            padding: 0;
            font-family: 'Lora', serif;
            background-color: #1b2a41;
            color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: url("{{ url_for('static', filename='bg.jpeg') }}");
            background-size: cover;

            background-position: center top;
            background-attachment: fixed;
        }

        .overlay {
            display: flex;
            justify-content: space-between;
            /* Align form and right-side box */
            align-items: flex-start;
            background: rgba(0, 0, 0, 0.8);
            /* Darker overlay for better contrast */
            padding: 40px 30px;
            /* Increased padding */
            border-radius: 15px;
            width: 90%;
            max-width: 1000px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            flex-direction: column;
            padding-bottom: 10px;
        }

        .title {
            text-align: center;
            color: #f39c12;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 0px;
        }

        /* Form Styling */
        .form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            /* Take up 100% of the overlay width */
        }

        label {
            font-size: 1rem;
            color: #f8f9fa;
        }

        input,
        select {
            padding: 10px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            outline: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        input:hover,
        select:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 6px rgba(243, 156, 18, 0.4);
        }

        input:focus,
        select:focus {
            box-shadow: 0 0 10px rgba(243, 156, 18, 0.7);
        }

        .btn {
            padding: 12px 15px;
            font-size: 1.1rem;
            font-weight: bold;
            background-color: #f39c12;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: #d35400;
            transform: scale(1.03);
        }

        .btn:active {
            transform: scale(0.98);
        }

        /* Result Section */
        .result {
            margin-top: 30px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            background-color: rgba(0, 123, 255, 0.8);
            color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .result.failed {
            background-color: rgba(220, 53, 69, 0.8);
            /* Red background for failure */
        }

        .credits {
            margin-top: 25px;
            text-align: center;
            font-size: 1rem;
            color: #f8f9fa;
            margin-bottom: 15px;
        }

        .credits span {
            font-size: 1.2rem;
            color: #e74c3c;
        }

        /* Did You Know Box */
        .did-you-know-box {
            position: absolute;
            top: 28%;
            right: 10%;
            background: rgba(0, 0, 0, 0.8);
            /* Same dark background as overlay */
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            padding-top: 10px;
        }

        .did-you-know-box h3 {
            color: #f39c12;
            /* Matching color with title */
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .fact-text {
            color: #f8f9fa;
            font-size: 1rem;
            text-align: justify;
            padding: 10px;
        }
    </style>
</head>

<body>

    <div class="overlay">
        <div class="form-section">
            <h1 class="title">Titanic Survival Prediction</h1>
            <form method="post" class="form" onsubmit="return validateForm()">
                <label for="Pclass">Passenger Class</label>
                <select name="Pclass" id="Pclass" required>
                    <option value="1">1st Class</option>
                    <option value="2">2nd Class</option>
                    <option value="3">3rd Class</option>
                </select>

                <label for="Age">Age (in years)</label>
                <input type="number" name="Age" id="Age" placeholder="Enter age in years" min="0" required>

                <label for="SibSp">Number of Siblings/Spouses Aboard</label>
                <input type="number" name="SibSp" id="SibSp" placeholder="Number of siblings/spouses aboard the Titanic"
                    min="0" required>

                <label for="Parch">Number of Parents/Children Aboard</label>
                <input type="number" name="Parch" id="Parch" placeholder="Number of parents/children aboard the Titanic"
                    min="0" required>

                <label for="Fare">Fare (Amount Paid)</label>
                <input type="number" name="Fare" id="Fare" placeholder="Enter fare amount" min="0" required>

                <label for="Sex">Gender</label>
                <select name="Sex" id="Sex" required>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                </select>

                <label for="Port">Port of Embarkation</label>
                <select name="Port" id="Port" required>
                    <option value="C">Cherbourg</option>
                    <option value="Q">Queenstown</option>
                    <option value="S">Southampton</option>
                </select>

                <button type="submit" class="btn">Submit</button>
            </form>

            <!-- Prediction Result Section -->
            {% if prediction %}
            <div class="result {% if prediction == 'Did not Survive' %}failed{% endif %}">
                Prediction: <span>{{ prediction }}</span>
            </div>
            {% endif %}

            <!-- Made with love part -->
            <div class="credits">
                Made with <span>❤️</span> by Titanic ML Team
            </div>
        </div>
    </div>

    <!-- Did You Know Box -->
    <div class="did-you-know-box">
        <h3>Did You Know?</h3>
        <div id="fact-text" class="fact-text">
            <!-- Dynamic fact will appear here -->
            The Titanic was the largest ship afloat at the time of its maiden voyage.
        </div>
    </div>

    <script>
        // Dynamic facts that change every few seconds
        const facts = [
            "Titanic's first-class suites cost over $2,500, a fortune at the time.",
            "The ship had a real-life 'unsinkable' reputation before its fateful voyage.",
            "Titanic carried over 2,200 passengers and crew but had lifeboats for only 1,178.",
            "Titanic's iceberg collision took just 37 seconds to sink the ship.",
            "The ship's band played on even as Titanic sank, trying to keep passengers calm.",
            "Titanic's captain, Edward Smith, went down with the ship, as was his duty.",
            "The iceberg that sank Titanic was spotted by lookouts but was too close to avoid.",
            "Titanic's final SOS message was sent 15 minutes after hitting the iceberg.",
            "Titanic's wreck lies over 12,000 feet beneath the ocean surface.",
            "Titanic's maiden voyage was her only voyage, lasting only four days."
        ];


        let currentFactIndex = 0;

        function updateFact() {
            currentFactIndex = (currentFactIndex + 1) % facts.length;
            document.getElementById("fact-text").textContent = facts[currentFactIndex];
        }

        // Update fact every 5 seconds
        setInterval(updateFact, 5000);

        // Initial fact update
        updateFact();

        // Form validation
        function validateForm() {
            const age = document.getElementById("Age").value;
            const fare = document.getElementById("Fare").value;

            if (age < 0) {
                alert("Age cannot be negative.");
                return false;
            }

            if (fare < 0) {
                alert("Fare cannot be negative.");
                return false;
            }



            // Display the prediction result
            document.getElementById("prediction-text").textContent = prediction;

            // Apply red background if did not survive
            if (prediction === "Did not Survive") {
                document.getElementById("prediction-result").classList.add("failed");
            } else {
                document.getElementById("prediction-result").classList.remove("failed");
            }

            document.getElementById("prediction-result").style.display = "block"; // Show the result

            return false; // Prevent form submission for now
        }
    </script>

</body>

</html>